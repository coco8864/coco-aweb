<!DOCTYPE html> 
<html lang="jp"> 
<head> 
	<meta charset="UTF-8" /> 
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Pragma" content="no-cache"> 
	<meta http-equiv="Cache-Control" content="no-cache"> 
	<meta http-equiv="Expires" content="0"> 
	<title>Welcom to Phantom Proxy</title>

	<link type="text/css" href="/pub/css/jquery-ui-1.8.2.custom.css" rel="stylesheet" />
	<script type="text/javascript" src="/pub/js/ph-loader.js?include=ph-auth.js"></script>
	<link type="text/css" href="/pub/css/ph.css" rel="stylesheet" /> 
<style type="text/css"><!--
td,th {border:1px solid #000;text-align:left;font-size:x-small}
		.ui-resizable-se {
			bottom: 17px;
		}
.mainTitle{ margin: 0.0em 0.5em;padding:0em 0.0em 0.0em;}
.welcom{ margin: 0.0em 1.0em;font-size: 125.0%;}
-->
</style>
	<script type="text/javascript"> 
	ph.jQuery(function() {
		ph.auth.getUser(function(user){
			var inout=ph.jQuery("#loginout");
			if(user){
				ph.jQuery("#welcom").text(user.loginId+"さん ようこそ");
				inout.attr("src","/pub/images/logout.gif");
				inout.attr("title","logout");
				inout.unbind();
				inout.bind("click",function(){location=ph.authUrl+'/logout';});
//				ph.jQuery("#loginout")[0].href=ph.authUrl+'/logout';
			}else{
				ph.jQuery("#welcom").text("Welcome to Phantom Proxy");
				inout.attr("src","/pub/images/login.gif");
				inout.attr("title","login");
				inout.unbind();
				inout.bind("click",function(){location=ph.authUrl;});
			}
			if(ph.isUseWebSocket){
				ph.jQuery("#websocket").text("使用します");
			}else{
				ph.jQuery("#websocket").text("使用しません");
			}
			if(ph.isUseSessionStorage){
				ph.jQuery("#sessionStorage").text("使用します");
			}else{
				ph.jQuery("#sessionStorage").text("使用しません");
			}
			if(ph.isUseCrossDomain){
				ph.jQuery("#crossDocument").text("使用します");
			}else{
				ph.jQuery("#crossDocument").text("使用しません");
			}
		});
	});
	function goAdmin(){
		if(ph){
			location.href=ph.adminUrl;
		}else{
			location.reload();
		}
	}
	</script> 

</head> 
<body> 
<H1>Phantom Proxy Home</span></H1>
<div style="text-align:right"><span id="welcom"></span>
<img id="loginout"/>
</div>
<hr/>
<div><a href="#" onclick="goAdmin()">Phantom Proxy Console</a></div>
<hr/>
<div>Browser support function</div>
<table>
<tr><td>WebSocket API</td><td id="websocket"></td></tr>
<tr><td>Web Storage sessionStorage</td><td id="sessionStorage"></td></tr>
<tr><td>Cross-document messaging</td><td id="crossDocument"></td></tr>
</table>
<hr/>
</body>
</html>
